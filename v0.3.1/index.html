<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; CloudEvents
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1 id="ruby-sdk-for-cloudevents">Ruby SDK for <a href="https://github.com/cloudevents/spec">CloudEvents</a></h1>

<h2 id="cloudevents-ruby-sdk">CloudEvents Ruby SDK</h2>

<p>A <a href="https://ruby-lang.org">Ruby</a> language implementation of the
<a href="https://github.com/cloudevents/spec">CloudEvents specification</a>.</p>

<p>Features:</p>

<ul>
<li> Ruby classes for representing CloudEvents, including support for standard
and extension attributes.</li>
<li> Support for serializing and deserializing from JSON Structure Format and
JSON Batch Format.</li>
<li> Support for sending and receiving CloudEvents via HTTP Bindings.</li>
<li> Supports the <a href="https://github.com/cloudevents/spec/tree/v0.3">CloudEvent 0.3</a>
and <a href="https://github.com/cloudevents/spec/tree/v1.0">CloudEvents 1.0</a>
specifications.</li>
<li> Extensible to additional formats and protocol bindings, and future
specification versions.</li>
<li> Compatible with Ruby 2.5 or later, or JRuby 9.2.x or later. No runtime gem
dependencies.</li>
</ul>

<h2 id="quickstart">Quickstart</h2>

<p>Install the <code>cloud_events</code> gem or add it to your bundle.</p>

<pre class="code sh"><code class="sh">gem install cloud_events
</code></pre>

<h3 id="receiving-a-cloudevent-in-a-sinatra-app">Receiving a CloudEvent in a Sinatra app</h3>

<p>A simple <a href="https://sinatrarb.com">Sinatra</a> app that receives CloudEvents:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># examples/server/Gemfile
</span><span class='id identifier rubyid_source'>source</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://rubygems.org</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cloud_events</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~&gt; 0.2</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sinatra</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~&gt; 2.0</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># examples/server/app.rb
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sinatra</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cloud_events</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_cloud_events_http'>cloud_events_http</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CloudEvents.html" title="CloudEvents (module)">CloudEvents</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="CloudEvents/HttpBinding.html" title="CloudEvents::HttpBinding (class)">HttpBinding</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default'><span class='object_link'><a href="CloudEvents/HttpBinding.html#default-class_method" title="CloudEvents::HttpBinding.default (method)">default</a></span></span>

<span class='id identifier rubyid_post'>post</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_cloud_events_http'>cloud_events_http</span><span class='period'>.</span><span class='id identifier rubyid_decode_rack_env'>decode_rack_env</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_env'>env</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Received CloudEvent: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>

<h3 id="sending-a-cloudevent">Sending a CloudEvent</h3>

<p>A simple Ruby script that sends a CloudEvent:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># examples/client/Gemfile
</span><span class='id identifier rubyid_source'>source</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://rubygems.org</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cloud_events</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~&gt; 0.2</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<pre class="code ruby"><code class="ruby"><span class='comment'># examples/client/send.rb
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cloud_events</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>net/http</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uri</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, CloudEvents!</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CloudEvents.html" title="CloudEvents (module)">CloudEvents</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="CloudEvents/Event.html" title="CloudEvents::Event (module)">Event</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'><span class='object_link'><a href="CloudEvents/Event.html#create-class_method" title="CloudEvents::Event.create (method)">create</a></span></span> <span class='label'>spec_version:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                  <span class='label'>id:</span>           <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1234-1234-1234</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                  <span class='label'>source:</span>       <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/mycontext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                  <span class='label'>type:</span>         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>com.example.someevent</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                  <span class='label'>data:</span>         <span class='id identifier rubyid_data'>data</span>

<span class='id identifier rubyid_cloud_events_http'>cloud_events_http</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CloudEvents.html" title="CloudEvents (module)">CloudEvents</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="CloudEvents/HttpBinding.html" title="CloudEvents::HttpBinding (class)">HttpBinding</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default'><span class='object_link'><a href="CloudEvents/HttpBinding.html#default-class_method" title="CloudEvents::HttpBinding.default (method)">default</a></span></span>
<span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_cloud_events_http'>cloud_events_http</span><span class='period'>.</span><span class='id identifier rubyid_encode_binary_content'>encode_binary_content</span> <span class='id identifier rubyid_event'>event</span>
<span class='const'>Net</span><span class='op'>::</span><span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span> <span class='const'>URI</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://localhost:4567</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span>
</code></pre>

<h3 id="putting-it-together">Putting it together</h3>

<p>Start the server on localhost:</p>

<pre class="code sh"><code class="sh">cd server
bundle install
bundle exec ruby app.rb
</code></pre>

<p>This will run the server in the foreground and start logging to the console.</p>

<p>In a separate terminal shell, send it an event from the client:</p>

<pre class="code sh"><code class="sh">cd client
bundle install
bundle exec ruby send.rb
</code></pre>

<p>The event should be logged in the server logs.</p>

<p>Hit <code>CTRL+C</code> to stop the server.</p>

<h2 id="contributing">Contributing</h2>

<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/cloudevents/sdk-ruby">https://github.com/cloudevents/sdk-ruby</a>.</p>

<h3 id="development">Development</h3>

<p>After cloning the repo locally, install the bundle, and install the <code>toys</code> gem
if you do not already have it.</p>

<pre class="code sh"><code class="sh">bundle install
gem install toys
</code></pre>

<p>A variety of Toys scripts are provided for running tests and builds. For
example:</p>

<pre class="code sh"><code class="sh"># Run the unit tests
toys test

# Run CI locally, including unit tests, doc tests, and rubocop
toys ci

# Build and install the gem locally
toys install

# Clean temporary and build files
toys clean

# List all available scripts
toys

# Show online help for the &quot;test&quot; script
toys test --help
</code></pre>

<h3 id="code-style">Code style</h3>

<p>Ruby code in this library generally follows the
<a href="https://github.com/googleapis/ruby-style">Google Ruby Style Guide</a>, which is
based on &quot;Seattle Style&quot; Ruby.</p>

<p>Style is enforced by Rubocop rules. You can run rubocop directly using the
<code>rubocop</code> binary:</p>

<pre class="code sh"><code class="sh">bundle exec rubocop
</code></pre>

<p>or via Toys:</p>

<pre class="code sh"><code class="sh">toys rubocop
</code></pre>

<p>That said, we are not style sticklers, and if a break is necessary for code
readability or practicality, Rubocop rules can be selectively disabled.</p>

<h3 id="pull-requests">Pull requests</h3>

<p>We welcome contributions from the community! Please take some time to become
acquainted with the process before submitting a pull request. There are just a
few things to keep in mind.</p>

<ul>
<li> <strong>Typically a pull request should relate to an existing issue.</strong> If you
have found a bug, want to add an improvement, or suggest an API change,
please create an issue before proceeding with a pull request. For very
minor changes such as typos in the documentation this isn&#39;t necessary.</li>
<li> <strong>Use Conventional Commit messages.</strong> All commit messages should follow the
<a href="https://conventionalcommits.org">Conventional Commits Specification</a> to
make it clear how your change should appear in release notes.</li>
<li> <strong>Sign your work.</strong> Each PR must be signed. Be sure your git <code>user.name</code>
and <code>user.email</code> are configured then use the <code>--signoff</code> flag for your
commits. e.g. <code>git commit --signoff</code>.</li>
<li> <strong>Make sure CI passes.</strong> Invoke <code>toys ci</code> to run the tests locally before
opening a pull request. This will include code style checks.</li>
</ul>

<h3 id="releasing">Releasing</h3>

<p>Releases can be performed only by users with write access to the repository.</p>

<p>To perform a release:</p>

<ol>
<li><p>Go to the GitHub Actions tab, and launch the &quot;Request Release&quot; workflow.
You can leave the input field blank.</p></li>
<li><p>The workflow will analyze the commit messages since the last release, and
open a pull request with a new version and a changelog entry. You can
optionally edit this pull request to modify the changelog or change the
version released.</p></li>
<li><p>Merge the pull request (keeping the <code>release: pending</code> label set.) Once the
CI tests have run successfully, a job will run automatically to perform the
release, including tagging the commit in git, building and releasing a gem,
and building and pushing documentation.</p></li>
</ol>

<p>These tasks can also be performed manually by running the appropriate scripts
locally. See <code>toys release request --help</code> and <code>toys release perform --help</code>
for more information.</p>

<p>If a release fails, you may need to delete the release tag before retrying.</p>

<h3 id="for-more-information">For more information</h3>

<ul>
<li> Library documentation: <a href="https://cloudevents.github.io/sdk-ruby">https://cloudevents.github.io/sdk-ruby</a></li>
<li> Issue tracker: <a href="https://github.com/cloudevents/sdk-ruby/issues">https://github.com/cloudevents/sdk-ruby/issues</a></li>
<li> Changelog: <a href="https://cloudevents.github.io/sdk-ruby/latest/file.CHANGELOG.html">https://cloudevents.github.io/sdk-ruby/latest/file.CHANGELOG.html</a></li>
</ul>

<h2 id="community">Community</h2>

<ul>
<li><p><strong>Weekly meetings:</strong> There are bi-weekly calls immediately following the
<a href="https://github.com/cloudevents/spec#meeting-time">Serverless/CloudEvents call</a>
at 9am PT (US Pacific). Which means they will typically start at 10am PT,
but if the other call ends early then the SDK call will start early as
well. See the
<a href="https://docs.google.com/document/d/1OVF68rpuPK5shIHILK9JOqlZBbfe91RNzQ7u_P7YCDE/edit">CloudEvents meeting minutes</a>
to determine which week will have the call.</p></li>
<li><p><strong>Slack:</strong> The <code>#cloudeventssdk</code> channel under
<a href="https://slack.cncf.io/">CNCF&#39;s Slack workspace</a>.</p></li>
<li><p><strong>Email:</strong> <a href="https://lists.cncf.io/g/cncf-cloudevents-sdk">https://lists.cncf.io/g/cncf-cloudevents-sdk</a></p></li>
<li><p>For additional information, contact Daniel Azuma (<code>@dazuma</code> on Slack).</p></li>
</ul>

<p>Each SDK may have its own unique processes, tooling and guidelines, common
governance related material can be found in the
<a href="https://github.com/cloudevents/spec/tree/master/community">CloudEvents <code>community</code></a>
directory. In particular, in there you will find information concerning
how SDK projects are
<a href="https://github.com/cloudevents/spec/blob/master/community/SDK-GOVERNANCE.md">managed</a>,
<a href="https://github.com/cloudevents/spec/blob/master/community/SDK-maintainer-guidelines.md">guidelines</a>
for how PR reviews and approval, and our
<a href="https://github.com/cloudevents/spec/blob/master/community/GOVERNANCE.md#additional-information">Code of Conduct</a>
information.</p>

<h2 id="licensing">Licensing</h2>

<pre class="code ruby"><code class="ruby">Copyright 2020 Google LLC and the CloudEvents Ruby SDK Contributors

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
</div></div>

      <div id="footer">
  Generated on Sun Apr 25 00:44:19 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.3).
</div>

    </div>
  </body>
</html>